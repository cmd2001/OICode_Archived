20180615小测

我居然学会WA题了！？

T1:

首先我们能打表观察或者数学推导得到在x为质数时f(x)=x，否则f(x)=2。
之后就是一个裸的k次剩余，也就是Bzoj1319了。
这个东西怎么做？假设我们要求解x^k=a(mod p)，我们能求出p的原根g，并用BSGS求出a=g^n(mod p)。
假设x=g^t，那么我们有:t*k=n(mod phip)，我们要求出所有可行的t。
然后就十分显然了，exgcd求出kx+yphip=gcd(k,phip)，如果n不是gcd(k,phip)则显然无解，否则我们能以n/gcd(k,phip)*x为初值，x%(phip/gcd(phip,k))为步长不断递增求出所有可行的t。
注意特判掉p=2的情况，就可以AC啦。
代码:

T2:

子树修改，链询问，不改变形态，一眼树剖+dfs序。
通过树剖我们能把询问变成dfs序上的logn个区间。
然后就是怎么维护这个序列的问题了，如果我们把点看做横坐标x，白兔数量看做纵坐标y，那么我们要进行的就是区间赋值，区间把点放到一条线上。
(不知道大家怎么想，反正我不会用线段树或者kdtree做......)
考虑分块，块内用数据结构(我选择了非旋treap)维护横坐标为x的最大的y。
这样对于整块的修改w，我们打标记，整块修改b，我们打标记，非整块修改，我们暴力push标记然后重构整个块。
查询怎么办？
对于整块的查询，如果有w标记且w标记在区间内，返回区间最大的b，否则返回0。
对于整块的查询，如果没有w标记，就是经典的treap区间查询了。(注意如果有b标记也不能直接返回b，因为我们需要的区间在块内可能为空)。
对于非整块的查询，暴力。
这个东西的时间复杂度是O(nsqrt(n)log^2n)，空间复杂度线性。但是由于树剖和非旋treap的常数都很小，于是就可以AC啦(踩爆标程的3个log)。
另外神仙lyy的复杂度和链上颜色数相关的算法也AC了......我能把他卡成n^2......辣鸡出题人不会造数据。
代码(又臭又长的蒟蒻码风就不要吐槽了):

T3:

这题我想了一个针对60分错误算法，爆零了......(另外这个题的前20%数据是不满足60%限制的，也就是说60%限制根本不够，辣鸡出题人不会造数据X2)
大概就是这样，f[i][x][y][s]表示i步在坐标(x,y)，状态为s的最小值(显然i最大是nm)，转移的话枚举怎么走，用队列存储状态加剪枝在随机数据下快到飞起。
看起来很有道理的样子，然而它是WA的，因为这样只能DP出一条简单路径的方案，但是最优方案可能不是一条路径(比如一个T形)。
正解是这样的:

我太菜了连斯坦纳树都看不出来了......
(话说我那个算法如果对的话斯坦纳树还有何用，心里就没点**吗)
随机化的话，随机数种子用老婆的名字，跑150次加上最优性剪枝，在Ofast加持下能卡进1.5s，踩爆std。

考场爆零代码:

正解代码:

这次又不是rank1了(还不是因为T3爆零)，果然我还是太菜了啊。
这次之前的话，已经不知道多长时间没有在考场上WA题了呢......

I am waiting for you And looking for truth But not a sound is heard
我在等着 ，寻找着真相 但却听不到声音
Whenever you need any help and my voice Lease let me know
无论何时 只要你需要任何帮助和我的声音 请让我知道
Can I sing for you or cry for dream ?
我可以为你歌唱或者呼唤梦想么
Let the wind blow
让风吹吧
So I can see the sky
这样我就能看到天空
