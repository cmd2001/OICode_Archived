原以为会了后缀自动机和后缀数组对字符串题就无所不能的我，今天被哈希教了做人。
显然出现在答案串中的长为k的子串一定能由两个长度为k的源串的子串通过重叠k-1个字符组成，否则我们卡中间的一串便不是源串的子串(自行脑补)。
然后哈希拓扑排序即可。