20180620小测

为什么这么多原题......

T1:

这题我做过，「BZOJ2568: 比特集合」了解一下，此题终结。
代码:

T2:

这题我做过，「BZOJ5332: [Sdoi2018]旧试题」了解一下，此题终结。
代码:

T3:

这题，我......没做过。
这种期望一看就是假期望，其实就是统计贡献然后除总方案数。
于是我想到了一个暴力DP:
我们令f(i,j)表示i个不同的点分成j个联通块的方案数，我们有:

然后想了半天怎么优化，想不出来，10分弃疗。
正解根本不是这么做的......
首先《具体数学》告诉我们:

其中S(n,i)为第二类斯特林数，表示把n个点划分成i个不同的集合的方案数。
(考虑左边是n个不同球x个不同盒子随便放的方案数，右边先钦定用几个盒子，选出盒子并排列，把球分开然后放进去的方案数，正确性显然)
我们令f(i,j)表示i个点x次的贡献，如果分成了j个联通块，则贡献为下面的val，考虑贡献的组合意义(联通块间有序)，我们得到f的转移和答案的计算公式:

其中g(i)表示g个点的联通块方案数，怎么求？「BZOJ3456: 城市规划」了解一下。
把组合数拆开，显然就是卷积了。最后是斯特林数的递推问题了:

注意一下初值，然后就能AC啦。
考场10分代码:

正解代码:


